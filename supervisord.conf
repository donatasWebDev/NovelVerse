[unix_http_server]
file=/var/run/supervisor.sock
chmod=0700

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock

[supervisord]
nodaemon=true
logfile=/dev/null                  ; Optional: less spam from supervisord itself

[program:nginx]
command=nginx -g "daemon off;"
autorestart=true
redirect_stderr=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:py_socket]
command=python -u py_socket.py     ; FIXED: real filename, -u = unbuffered, relative OK because of directory below
directory=/workspace/NovelVerse/py_server
autorestart=true
redirect_stderr=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
environment=PYTHONUNBUFFERED="1"   ; Extra insurance against buffering

[program:node_backend]
command=node dist/index.js         ; Relative path fine with directory below
directory=/workspace/NovelVerse/backend
environment=BACKEND_PORT="5000"
autorestart=true
redirect_stderr=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr